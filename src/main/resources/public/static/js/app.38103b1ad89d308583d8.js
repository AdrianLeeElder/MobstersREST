webpackJsonp([1],{"96sJ":function(t,e){},BB7V:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("7+uW"),s=o("Dd8w"),i=o.n(s),r={name:"StatusIndicator",props:{item:Object,daily:Boolean},computed:{getItem:function(){if(!this.daily)return this.item;if(null===this.item.actionJobs||!this.item.actionJobs)return{};var t={};return this.item.actionJobs.forEach(function(e){e.daily&&(console.log(e.complete),t=e)}),t}}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.getItem.running?[e("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})]:this.getItem.queued?[e("v-icon",[this._v("queue")])]:this.getItem.complete?[e("v-icon",[this._v("check_circle")])]:this._e()],2)},staticRenderFns:[]};var a=o("VU/8")(r,c,!1,function(t){o("bNhb")},null,null).exports,l={name:"ActionJobs",props:{actionJobs:Array},data:function(){return{activeActionJobTab:0,dailyActionJobHeaders:[{text:"Action Name",value:"name",sortable:!1},{text:"Status",value:"status",sortable:!1}]}},computed:{dailyActionJob:function(){var t={};return void 0!==this.actionJobs&&this.actionJobs.forEach(function(e){void 0!==e&&e.daily&&(t=e,console.log("Found daily job:"),console.log(t))}),t},buyPropertyActionJob:function(){var t={};return void 0!==this.actionJobs&&this.actionJobs.forEach(function(e){void 0!==e&&e.buyProperty&&(t=e,console.log("Found buy property job:"),console.log(t))}),t}},components:{StatusIndicator:a}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-card",{staticClass:"ma-3"},[o("v-data-table",{attrs:{items:t.dailyActionJob.actionList,headers:t.dailyActionJobHeaders,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[o("td",[t._v(t._s(e.item.name))]),t._v(" "),o("td",[o("StatusIndicator",{attrs:{item:e.item}})],1)]}}])})],1)],1)},staticRenderFns:[]},d={name:"AccountsDashboard",data:function(){return{accountHeaders:[{text:"Status",value:"status"},{text:"Username",value:"username"},{text:"Priority",value:"priority",sortable:!0},{text:"Account",value:"account",sortable:!1}],mobsters:[],editingAccount:{priority:"Low",username:"",password:""},priorities:["Low","Medium","High"],showAccountEditor:!1,selectedAccounts:[],activeActionJobs:[],tempMobsters:[],deletingAccount:{username:""},showDeletedSuccess:!1,showAccountDeletionConfirm:!1,showDeletedFailure:!1,loadingMobsters:!0,searchMobster:"",showAccountEditedSuccessfully:!1,showAccountEditedFailure:!1}},methods:{closeDeleteAccountConfirmation:function(){this.showAccountDeletionConfirm=!1},closeAccountEditor:function(){this.showAccountEditor=!1,this.editingAccount={}},editAccount:function(t){this.editingAccount=t,this.showAccountEditor=!0,console.log("editing account"),console.log(this.editingAccount)},deleteAccount:function(){var t=this;this.$http.delete("mobster/delete/"+this.deletingAccount.id).then(function(e){200===e.data.status?(t.showDeletedSuccess=!0,t.showAccountDeletionConfirm=!1):t.showDeletedFailure=!0})},saveAccount:function(){var t=this;console.log("save account"),console.log(this.editingAccount),this.$http.post("mobster",this.editingAccount).then(function(e){200===e.status?t.showAccountEditedSuccessfully=!0:t.showAccountEditedFailure=!1,t.closeAccountEditor()})},areYouSureDeleteAccountConfirm:function(t){this.deletingAccount=t,this.showAccountDeletionConfirm=!0},close:function(){this.showAccountEditor=!1},loadMobsters:function(){var t=this;this.mobsters.forEach(function(e){var o=t.tempMobsters.find(function(t){return t.username===e.username});e.actionJobs=o.actionJobs})},setTempMobsters:function(t){var e=this;this.$http.get("mobster").then(function(o){e.tempMobsters=o.data,t&&(e.mobsters=e.tempMobsters),e.loadingMobsters=!1})},expandMobster:function(t){this.mobsterToTickActionJobs=t.item,t.expanded=!t.expanded},tickTempMobsters:function(){var t=this;setInterval(function(){t.setTempMobsters(!1)},2e3)},tickLoadMobsters:function(){var t=this;setInterval(function(){t.loadMobsters()},2e3)}},created:function(){this.loadingMobsters=!0,this.setTempMobsters(!0),this.tickTempMobsters(),this.tickLoadMobsters()},components:{StatusIndicator:a,ActionJobs:o("VU/8")(l,u,!1,null,null,null).exports}},v={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-alert",{attrs:{dismissible:"",type:"success"},model:{value:t.showDeletedSuccess,callback:function(e){t.showDeletedSuccess=e},expression:"showDeletedSuccess"}},[t._v("\n    Account ("+t._s(t.deletingAccount.username)+") successfully deleted.\n  ")]),t._v(" "),o("v-alert",{attrs:{dismissible:"",type:"error"},model:{value:t.showDeletedFailure,callback:function(e){t.showDeletedFailure=e},expression:"showDeletedFailure"}},[t._v("\n    Unable to delete account ("+t._s(t.deletingAccount.username)+")!\n  ")]),t._v(" "),o("v-alert",{attrs:{dismissible:"",type:"success"},model:{value:t.showAccountEditedSuccessfully,callback:function(e){t.showAccountEditedSuccessfully=e},expression:"showAccountEditedSuccessfully"}},[t._v("\n    Successfully updated settings for "+t._s(t.editingAccount.username)+".\n  ")]),t._v(" "),o("v-alert",{attrs:{dismissible:"",type:"error"},model:{value:t.showAccountEditedFailure,callback:function(e){t.showAccountEditedFailure=e},expression:"showAccountEditedFailure"}},[t._v("\n    Unable to save account settings for "+t._s(t.editingAccount.username)+".\n  ")]),t._v(" "),o("v-layout",{staticClass:"ma-4",attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{x8:""}},[o("v-card",{staticClass:"pa-3"},[o("v-card-title",[o("v-spacer"),t._v(" "),o("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:t.searchMobster,callback:function(e){t.searchMobster=e},expression:"searchMobster"}})],1),t._v(" "),o("v-data-table",{staticClass:"elevation-2",attrs:{headers:t.accountHeaders,items:t.mobsters,loading:t.loadingMobsters,search:t.searchMobster},scopedSlots:t._u([{key:"items",fn:function(e){return[o("tr",{staticStyle:{cursor:"pointer"},on:{click:function(o){t.expandMobster(e)}}},[o("td",[o("StatusIndicator",{attrs:{item:e.item,daily:!0}})],1),t._v(" "),o("td",[t._v(t._s(e.item.username))]),t._v(" "),o("td",["Low"===e.item.priority?[o("v-icon",[t._v("star_border")])]:"Medium"===e.item.priority?[o("v-icon",[t._v("star_half")])]:"High"===e.item.priority?[o("v-icon",[t._v("star")])]:t._e()],2),t._v(" "),o("td",{staticClass:"justify-center layout px-0"},[o("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(o){o.stopPropagation(),t.editAccount(e.item)}}},[t._v("\n                  edit\n                ")]),t._v(" "),o("v-icon",{attrs:{small:""},on:{click:function(o){o.stopPropagation(),t.areYouSureDeleteAccountConfirm(e.item)}}},[t._v("\n                  delete\n                ")])],1)])]}},{key:"expand",fn:function(t){return[o("ActionJobs",{attrs:{actionJobs:t.item.actionJobs}})]}}])},[o("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1),t._v(" "),o("v-dialog",{attrs:{width:"500"},model:{value:t.showAccountDeletionConfirm,callback:function(e){t.showAccountDeletionConfirm=e},expression:"showAccountDeletionConfirm"}},[o("v-card",[o("v-card-title",{staticClass:"headline red lighten-2",attrs:{"primary-title":""}},[t._v("\n              Delete Account: "+t._s(t.deletingAccount.username)+"\n            ")]),t._v(" "),o("v-card-text",[t._v("\n              Are you sure you want to delete this account?\n            ")]),t._v(" "),o("v-divider"),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"error",flat:""},nativeOn:{click:function(e){return t.deleteAccount(e)}}},[t._v("\n                Delete\n              ")]),t._v(" "),o("v-btn",{attrs:{color:"secondary",flat:""},nativeOn:{click:function(e){return t.closeDeleteAccountConfirmation(e)}}},[t._v("\n                Cancel\n              ")])],1)],1)],1)],1)],1)],1),t._v(" "),o("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.showAccountEditor,callback:function(e){t.showAccountEditor=e},expression:"showAccountEditor"}},[o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[t._v("Mobster: "+t._s(t.editingAccount.username))])]),t._v(" "),o("v-card-text",[o("v-container",{attrs:{"grid-list-md":""}},[o("v-layout",{attrs:{wrap:""}},[o("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[o("v-text-field",{attrs:{label:"Username"},model:{value:t.editingAccount.username,callback:function(e){t.$set(t.editingAccount,"username",e)},expression:"editingAccount.username"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[o("v-text-field",{attrs:{label:"Password",type:"password"},model:{value:t.editingAccount.password,callback:function(e){t.$set(t.editingAccount,"password",e)},expression:"editingAccount.password"}})],1),t._v(" "),o("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[o("v-select",{attrs:{items:t.priorities},model:{value:t.editingAccount.priority,callback:function(e){t.$set(t.editingAccount,"priority",e)},expression:"editingAccount.priority"}})],1)],1)],1)],1),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.closeAccountEditor(e)}}},[t._v("Cancel")]),t._v(" "),o("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.saveAccount(e)}}},[t._v("Save")])],1)],1)],1)],1)},staticRenderFns:[]},h=o("VU/8")(d,v,!1,null,null,null).exports,m=o("NYxO"),p={name:"app",methods:{checkCurrentLogin:function(){this.currentUser||"/"===this.$route.path||(console.log("not logged in"),this.$router.push("/?redirect="+this.$route.path))}},computed:i()({},Object(m.b)({currentUser:"currentUser"})),components:{AccountsDashboard:h},updated:function(){this.checkCurrentLogin()},created:function(){this.checkCurrentLogin()}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",{staticStyle:{"background-color":"#e3e3e3"},attrs:{id:"inspire"}},[e("router-view")],1)},staticRenderFns:[]};var b=o("VU/8")(p,f,!1,function(t){o("BB7V")},null,null).exports,g=o("/ocq"),_={name:"Login",data:function(){return{valid:!1,username:"",password:"",error:!1,e1:!1,passwordRules:[function(t){return!!t||"Password is required"}]}},computed:i()({},Object(m.b)({currentUser:"currentUser"})),created:function(){this.checkCurrentLogin()},updated:function(){this.checkCurrentLogin()},methods:{checkCurrentLogin:function(){this.currentUser&&this.$router.replace(this.$route.query.redirect||"/index")},login:function(){var t=this;this.$http.post("/auth",{username:this.username,password:this.password}).then(function(e){return t.loginSuccessful(e)}).catch(function(){return t.loginFailed()})},loginSuccessful:function(t){t.data.token?(this.error=!1,localStorage.token=t.data.token,console.log("Adding token to local storage: "+t.data.token),this.$store.dispatch("login"),this.$router.replace(this.$route.query.redirect||"/index"),this.$router.go(0)):this.loginFailed()},loginFailed:function(){this.error="Login failed!",this.$store.dispatch("logout"),delete localStorage.token}}},A={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",{attrs:{flex:"","align-center":"","justify-center":""}},[o("v-flex",{attrs:{xs12:"",sm4:"","elevation-6":""}},[o("v-toolbar",{staticClass:"pt-2 blue darken-3"},[o("v-toolbar-title",{staticClass:"white--text"},[o("h4",[t._v("Login")])])],1),t._v(" "),o("v-card",[o("v-card-text",{staticClass:"pt-4"},[o("div",[o("v-form",{on:{submit:function(t){t.preventDefault()}}},[o("v-text-field",{attrs:{label:"Username",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),o("v-text-field",{attrs:{label:"Password","append-icon":t.e1?"visibility":"visibility_off","append-icon-cb":function(){return t.e1=!t.e1},type:t.e1?"password":"text",rules:t.passwordRules,required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),o("v-layout",{attrs:{"justify-space-between":""}},[o("v-btn",{class:{"blue darken-4 white--text":t.valid,disabled:!t.valid},on:{click:t.login}},[t._v("Login")])],1)],1)],1)])],1)],1)],1)},staticRenderFns:[]},w=o("VU/8")(_,A,!1,null,null,null).exports,y={name:"index",data:function(){return{drawer:!1}},components:{AccountsDashboard:h},computed:i()({},Object(m.b)({currentUser:"currentUser"}))},x={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-toolbar",{attrs:{dark:"",color:"primary",app:""}},[o("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),o("v-toolbar-title",{staticClass:"white--text"},[t._v("Mobsters Bot - Welcome, "+t._s(t.currentUser.username))]),t._v(" "),o("v-spacer"),t._v(" "),o("v-btn",{attrs:{flat:"",to:"/logout"}},[t._v("\n           Logout\n        ")])],1),t._v(" "),o("v-navigation-drawer",{attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[o("v-list",[o("v-list-group",[o("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[o("v-list-tile-action",[o("v-icon",[t._v("account_circle")])],1),t._v(" "),o("v-list-tile-title",[t._v("\n                        Mobsters\n                    ")])],1)],1)],1)],1),t._v(" "),o("v-content",[o("accounts-dashboard")],1)],1)},staticRenderFns:[]},k=o("VU/8")(y,x,!1,null,null,null).exports,E={name:"Logout",created:function(){delete localStorage.token,this.$store.dispatch("logout"),this.$router.push("/"),console.log("logging out"),this.$router.go(0)}},S={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]},M=o("VU/8")(E,S,!1,null,null,null).exports;n.a.use(g.a);var C,D=new g.a({routes:[{path:"/",name:"Login",component:w},{path:"/index",name:"Index",component:k},{path:"/logout",name:"Logout",component:M}],mode:"history"}),J=o("3EgV"),L=o.n(J),U=o("Rf8U"),$=o.n(U),F=o("mtWM"),O=o.n(F),I=Object({NODE_ENV:"production"}).MOBSTERS_API_URL||"http://localhost:8080/api/v1",R=O.a.create({baseURL:I,headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.token}}),T=o("bOdI"),j=o.n(T),N=o("Zrlr"),P=o.n(N),V=o("wxAW"),q=o.n(V),B=o("ytdl"),H=o.n(B),Y=function(){function t(e){var o=e.sub,n=e.role;P()(this,t),this.username=o,this.role=n}return q()(t,null,[{key:"from",value:function(e){try{var o=H()(e);return console.log("attempting to decode token"),console.log(o),new t(o)}catch(t){return null}}}]),q()(t,[{key:"isAdmin",get:function(){var t=!1;return this.role.forEach(function(e){"ROLE_ADMIN"===e&&(t=!0)}),t}}]),t}(),G={state:{user:Y.from(localStorage.token)},mutations:(C={},j()(C,"LOGIN",function(t){t.user=Y.from(localStorage.token)}),j()(C,"LOGOUT",function(t){t.user=null}),C),getters:{currentUser:function(t){return t.user}},actions:{login:function(t){(0,t.commit)("LOGIN")},logout:function(t){(0,t.commit)("LOGOUT")}}};n.a.use(m.a);var W=new m.a.Store({modules:{auth:G}});o("gJtD"),o("96sJ"),o("Y/7d");n.a.config.productionTip=!1,n.a.use(L.a),n.a.use($.a,R),new n.a({el:"#app",router:D,mobstersApi:R,store:W,components:{App:b},template:"<App/>"})},"Y/7d":function(t,e){},bNhb:function(t,e){},gJtD:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.38103b1ad89d308583d8.js.map